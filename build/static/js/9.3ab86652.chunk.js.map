{"version":3,"sources":["components/http-hooks.js","components/ErrorModal.js","css/Task.module.css","components/Backdrop.js","components/Modal.js","css/Profile.module.css","components/Profile.js"],"names":["useHttpClient","useState","isLoading","setIsLoading","error","setError","sendRequest","useCallback","url","a","method","body","headers","fetch","response","json","responseData","ok","Error","mess","message","clearError","ErrorModal","props","onCancel","onClear","header","show","footer","className","classes","edit","onClick","module","exports","Backdrop","ReactDOM","createPortal","document","getElementById","ModalOverlay","content","style","headerClass","onSubmit","event","preventDefault","contentClass","children","footerClass","Modal","Fragment","CSSTransition","in","mountOnEnter","unmountOnExit","timeout","classNames","Profile","auth","useContext","AuthContext","name","setName","email","setEmail","age","setAge","src","setSrc","useEffect","fetchUser","process","token","userId","imag","main","profile","asOverlay","img","alt","info","keys","values","to"],"mappings":"iNAEaA,EAAgB,WACzB,MAAkCC,oBAAS,GAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAA0BF,qBAA1B,mBAAOG,EAAP,KAAcC,EAAd,KACMC,EAAcC,sBAAW,uCAAC,WAAOC,GAAP,mCAAAC,EAAA,6DAAYC,EAAZ,+BAAqB,MAAOC,EAA5B,+BAAmC,KAAMC,EAAzC,+BAAmD,GAC/ET,GAAa,GADe,kBAGDU,MAAML,EAAK,CAC9BE,SACAC,OACAC,YANoB,cAGlBE,EAHkB,iBAQGA,EAASC,OARZ,WAQlBC,EARkB,OASnBF,EAASG,GATU,uBAUd,IAAIC,MAAMF,EAAaG,MAVT,eAYxBhB,GAAa,GAZW,kBAajBa,GAbiB,wCAexBX,EAAS,KAAIe,SAAW,wBACxBjB,GAAa,GAhBW,+DAAD,sDAoB5B,IAKH,MAAO,CAAED,YAAWE,QAAOE,cAAae,WAJrB,WACfhB,EAAS,U,gCC3BjB,yCAiBeiB,IAbI,SAAAC,GACjB,OACE,cAAC,IAAD,CACEC,SAAUD,EAAME,QAChBC,OAAO,qBACPC,OAAQJ,EAAMnB,MACdwB,OAAQ,wBAAQC,UAAWC,IAAQC,KAAMC,QAAST,EAAME,QAAhD,kBAJV,SAME,4BAAIF,EAAMnB,Y,mBCXhB6B,EAAOC,QAAU,CAAC,KAAO,mBAAmB,KAAO,mBAAmB,EAAI,gBAAgB,OAAS,qBAAqB,KAAO,mBAAmB,OAAS,qBAAqB,OAAS,qBAAqB,OAAS,uB,oGCWxMC,EAPE,SAAAZ,GACb,OAAOa,IAASC,aACZ,qBAAKR,UAAU,WAAWG,QAAST,EAAMS,UACzCM,SAASC,eAAe,mBCD1BC,G,MAAe,SAAAjB,GACjB,IAAMkB,EACF,sBAAKZ,UAAS,gBAAWN,EAAMM,WAAaa,MAAOnB,EAAMmB,MAAzD,UACI,wBAAQb,UAAS,wBAAmBN,EAAMoB,aAA1C,SACI,6BAAKpB,EAAMG,WAEf,uBACIkB,SACIrB,EAAMqB,SAAWrB,EAAMqB,SAAW,SAAAC,GAAK,OAAIA,EAAMC,kBAFzD,UAKI,qBAAKjB,UAAS,yBAAoBN,EAAMwB,cAAxC,SACKxB,EAAMyB,WAEX,wBAAQnB,UAAS,wBAAmBN,EAAM0B,aAA1C,SACK1B,EAAMK,eAKvB,OAAOQ,IAASC,aAAaI,EAASH,SAASC,eAAe,iBAoBnDW,IAjBD,SAAA3B,GACV,OACI,eAAC,IAAM4B,SAAP,WACK5B,EAAMI,MAAQ,cAAC,EAAD,CAAUK,QAAST,EAAMC,WACxC,cAAC4B,EAAA,EAAD,CACIC,GAAI9B,EAAMI,KACV2B,cAAY,EACZC,eAAa,EACbC,QAAS,IACTC,WAAW,QALf,SAOI,cAAC,EAAD,eAAkBlC,W,6DCxClCU,EAAOC,QAAU,CAAC,QAAU,yBAAyB,KAAO,sBAAsB,OAAS,wBAAwB,IAAM,qBAAqB,OAAS,wBAAwB,KAAO,wB,2JCiGvKwB,UAzFC,WACZ,IAAMC,EAAOC,qBAAWC,KACxB,EAAwB5D,mBAAS,IAAjC,mBAAO6D,EAAP,KAAaC,EAAb,KACA,EAA0B9D,mBAAS,IAAnC,mBAAO+D,EAAP,KAAcC,EAAd,KACA,EAAsBhE,mBAAS,IAA/B,mBAAOiE,EAAP,KAAYC,EAAZ,KACA,EAAsBlE,qBAAtB,mBAAOmE,EAAP,KAAYC,EAAZ,KACA,EAAsDrE,cAA9CE,EAAR,EAAQA,UAAWE,EAAnB,EAAmBA,MAAOE,EAA1B,EAA0BA,YAAae,EAAvC,EAAuCA,WAwDvC,OApCAiD,qBAAU,WACN,IAAMC,EAAS,uCAAG,4BAAA9D,EAAA,+EAEiBH,EAAYkE,2DAAiD,MAAO,KAAM,CACjG,cAAiB,UAAYb,EAAKc,QAH5B,OAEJzD,EAFI,OAMV+C,EAAQ/C,EAAa8C,MACrBG,EAASjD,EAAagD,OACtBG,EAAOnD,EAAakD,KARV,yGAAH,qDAcfK,MACD,CAACjE,IAEJgE,qBAAU,WACN,IAAMC,EAAS,uCAAG,4BAAA9D,EAAA,+EAEQH,EAAYkE,kDAAA,iBAA8Cb,EAAKe,OAAnD,WAAoE,MAAO,KAAM,CAC3G,cAAiB,UAAYf,EAAKc,QAH5B,OAEJL,EAFI,OAMVC,EAAOD,EAAIO,MAND,uGAAH,qDAWfJ,MACD,CAACjE,IAKG,cAAC,IAAM6C,SAAP,UACH,sBAAKtB,UAAWC,IAAQ8C,KAAxB,UACI,cAAC,IAAD,CAAYxE,MAAOA,EAAOqB,QAASJ,IAEnC,sBAAKQ,UAAWC,IAAQ+C,QAAxB,UACK3E,GAAa,cAAC,IAAD,CAAgB4E,WAAS,IACvC,sBAAKjD,UAAWC,IAAQiD,IAAxB,UACKX,GAAO,qBAAKA,IAAG,gCAA2BA,GAAOY,IAAI,YACtD,mBAAGnD,UAAWC,IAAQJ,OAAtB,wBAGJ,sBAAKG,UAAWC,IAAQmD,KAAxB,UACI,mBAAGpD,UAAWC,IAAQoD,KAAtB,uBACA,mBAAGrD,UAAWC,IAAQqD,OAAtB,SAA+BrB,IAC/B,mBAAGjC,UAAWC,IAAQoD,KAAtB,mBACA,mBAAGrD,UAAWC,IAAQqD,OAAtB,SAA+BnB,IAC/B,mBAAGnC,UAAWC,IAAQoD,KAAtB,iBACA,mBAAGrD,UAAWC,IAAQqD,OAAtB,SAA+BjB,IAC/B,cAAC,IAAD,CAAMkB,GAAE,sBAAiBzB,EAAKe,QAA9B,SACI","file":"static/js/9.3ab86652.chunk.js","sourcesContent":["import { useState, useCallback } from \"react\"\r\n\r\nexport const useHttpClient = () => {\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState()\r\n    const sendRequest = useCallback(async (url, method = \"GET\", body = null, headers = {}) => {\r\n        setIsLoading(true)\r\n        try {\r\n            const response = await fetch(url, {\r\n                method,\r\n                body,\r\n                headers\r\n            })\r\n            const responseData = await response.json()\r\n            if (!response.ok) {\r\n                throw new Error(responseData.mess)\r\n            }\r\n            setIsLoading(false)\r\n            return responseData\r\n        } catch (err) {\r\n            setError(err.message || \"Something went wrong\")\r\n            setIsLoading(false)\r\n            throw err\r\n        }\r\n\r\n    }, [])\r\n    const clearError = () => {\r\n        setError(null)\r\n    }\r\n\r\n    return { isLoading, error, sendRequest, clearError }\r\n}","import React from 'react';\n\nimport Modal from './Modal';\nimport classes from \"../css/Task.module.css\"\nconst ErrorModal = props => {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={<button className={classes.edit} onClick={props.onClear}>Okay</button>}\n    >\n      <p>{props.error}</p>\n    </Modal>\n  );\n};\n\nexport default ErrorModal;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Task_main__1S7O9\",\"task\":\"Task_task__y_jar\",\"p\":\"Task_p__3_LGx\",\"button\":\"Task_button__2WaKy\",\"edit\":\"Task_edit__1rpTY\",\"delete\":\"Task_delete__1C-mw\",\"cancel\":\"Task_cancel__395EH\",\"values\":\"Task_values__3uKPV\"};","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './Backdrop.css';\r\n\r\nconst Backdrop = props => {\r\n    return ReactDOM.createPortal(\r\n        <div className=\"backdrop\" onClick={props.onClick}></div>,\r\n        document.getElementById('backdrop-hook')\r\n    );\r\n};\r\n\r\nexport default Backdrop;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nimport Backdrop from './Backdrop';\r\nimport './Modal.css';\r\n\r\nconst ModalOverlay = props => {\r\n    const content = (\r\n        <div className={`modal ${props.className}`} style={props.style}>\r\n            <header className={`modal__header ${props.headerClass}`}>\r\n                <h2>{props.header}</h2>\r\n            </header>\r\n            <form\r\n                onSubmit={\r\n                    props.onSubmit ? props.onSubmit : event => event.preventDefault()\r\n                }\r\n            >\r\n                <div className={`modal__content ${props.contentClass}`}>\r\n                    {props.children}\r\n                </div>\r\n                <footer className={`modal__footer ${props.footerClass}`}>\r\n                    {props.footer}\r\n                </footer>\r\n            </form>\r\n        </div>\r\n    );\r\n    return ReactDOM.createPortal(content, document.getElementById('modal-hook'));\r\n};\r\n\r\nconst Modal = props => {\r\n    return (\r\n        <React.Fragment>\r\n            {props.show && <Backdrop onClick={props.onCancel} />}\r\n            <CSSTransition\r\n                in={props.show}\r\n                mountOnEnter\r\n                unmountOnExit\r\n                timeout={200}\r\n                classNames=\"modal\"\r\n            >\r\n                <ModalOverlay {...props} />\r\n            </CSSTransition>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Modal;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"Profile_profile__3nNgw\",\"keys\":\"Profile_keys__18p4G\",\"header\":\"Profile_header__1cWUU\",\"img\":\"Profile_img__3VxB1\",\"values\":\"Profile_values__kmKLA\",\"info\":\"Profile_info__2mJs7\"};","import React, { useState, useEffect, useContext } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { AuthContext } from \"./auth-context\"\r\nimport ErrorModal from \"./ErrorModal\"\r\nimport { useHttpClient } from \"./http-hooks\"\r\nimport LoadingSpinner from \"./LoadingSpinner\"\r\nimport classes from \"../css/Profile.module.css\"\r\n\r\n//\"https://res.cloudinary.com/dhqcjbrrk/image/upload/v1635139773/YelpCamp/noprofpic_wr5qzl.png\"\r\nconst Profile = () => {\r\n    const auth = useContext(AuthContext)\r\n    const [name, setName] = useState(\"\")\r\n    const [email, setEmail] = useState(\"\")\r\n    const [age, setAge] = useState(\"\")\r\n    const [src, setSrc] = useState()\r\n    const { isLoading, error, sendRequest, clearError } = useHttpClient()\r\n    // useEffect(() => {\r\n    //     const fetchUser = async () => {\r\n    //         try {\r\n    //             const responseData = await sendRequest(\"http://localhost:5000/users/me\", \"GET\", null, {\r\n    //                 \"Authorization\": \"Bearer \" + auth.token\r\n    //             })\r\n    //             const src = `http://localhost:5000/users/${auth.userId}/avatar`\r\n    //             setSrc(src)\r\n    //             setName(responseData.name)\r\n    //             setEmail(responseData.email)\r\n    //             setAge(responseData.age)\r\n\r\n    //         } catch (err) {\r\n\r\n    //         }\r\n    //     }\r\n    //     fetchUser()\r\n    // }, [sendRequest])\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            try {\r\n                const responseData = await sendRequest(process.env.REACT_APP_BACKEND_URL + \"/users/me\", \"GET\", null, {\r\n                    \"Authorization\": \"Bearer \" + auth.token\r\n                })\r\n\r\n                setName(responseData.name)\r\n                setEmail(responseData.email)\r\n                setAge(responseData.age)\r\n\r\n            } catch (err) {\r\n\r\n            }\r\n        }\r\n        fetchUser()\r\n    }, [sendRequest])\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            try {\r\n                const src = await sendRequest(process.env.REACT_APP_BACKEND_URL + `/users/${auth.userId}/avatar`, \"GET\", null, {\r\n                    \"Authorization\": \"Bearer \" + auth.token\r\n                })\r\n                //console.log(src.imag)\r\n                setSrc(src.imag)\r\n            } catch (err) {\r\n\r\n            }\r\n        }\r\n        fetchUser()\r\n    }, [sendRequest])\r\n\r\n\r\n\r\n\r\n    return <React.Fragment>\r\n        <div className={classes.main}>\r\n            <ErrorModal error={error} onClear={clearError}></ErrorModal>\r\n\r\n            <div className={classes.profile}>\r\n                {isLoading && <LoadingSpinner asOverlay></LoadingSpinner>}\r\n                <div className={classes.img}>\r\n                    {src && <img src={`data:image/png;base64,${src}`} alt=\"Profile\"></img>}\r\n                    <p className={classes.header}>Profile</p>\r\n                </div>\r\n\r\n                <div className={classes.info}>\r\n                    <p className={classes.keys}>Full Name</p>\r\n                    <p className={classes.values}>{name}</p>\r\n                    <p className={classes.keys}>Email</p>\r\n                    <p className={classes.values}>{email}</p>\r\n                    <p className={classes.keys}>Age</p>\r\n                    <p className={classes.values}>{age}</p>\r\n                    <Link to={`/edit/users/${auth.userId}`}>\r\n                        <button>Edit Profile</button>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </React.Fragment>\r\n}\r\n\r\nexport default Profile"],"sourceRoot":""}